import{a as I,r as c,j as a,b,B as f}from"./index-F5vbwB_e.js";import{G as A}from"./index-fx6LhctN.js";import{C as _}from"./Toast-3WOWCnnS.js";import{M as E}from"./Modal-DXZjyk5v.js";import{a as r,F as x}from"./Form-DX8VXhY2.js";import"./iconBase-kqh3y2ny.js";import"./ThemeProvider-nWUV6F1R.js";import"./useTimeout-BGLe_eT-.js";import"./TransitionWrapper-BBSR4vEj.js";import"./Button-yCakRxFg.js";import"./hasClass-CHl0QHe7.js";import"./warning-BE2tzXYX.js";import"./Col-CGBuhqx3.js";function G(){document.title="CarrerCell | Add new user";const p=I().pathname.split("/").filter(s=>s!==""&&s!=="admin"&&s!=="management")[0].split("-").filter(s=>s!=="add"&&s!=="admin")[0],[e,j]=c.useState({first_name:"",email:"",number:"",password:"",sendMail:!0}),[l,w]=c.useState({}),[y,u]=c.useState(!1),[C,g]=c.useState(""),[N,m]=c.useState(!1),$=()=>m(!1),h=s=>j({...e,[s.target.name]:s.target.value}),M=s=>{s.preventDefault();let n={};if(e!=null&&e.first_name||(n.first_name="Name Required!"),e!=null&&e.email||(n.email="Email Required!"),e!=null&&e.number||(n.number="Number Required!"),e!=null&&e.password||(n.password="Initial Password Required!"),Object.keys(n).length>0)return w(n);m(!0)},S=async()=>{var s,n;try{const t=await b.post(`${f}/management/add-management`,e,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(t!=null&&t.data){if(((s=t==null?void 0:t.data)==null?void 0:s.msg)==="User Created!"&&(e==null?void 0:e.sendMail)===!0){const i=encodeURIComponent("Welcome to the team!"),d=encodeURIComponent(`Hi ${e.first_name},

Welcome to our team as a Management. We're excited to work with you!
Note:
Your ID: ${e.email}
Password: ${e.password}

Make sure you change password as soon as possible!!!

Best regards,
Admin Team`),o=document.createElement("a");o.href=`mailto:${e.email}?subject=${i}&body=${d}`,o.target="_blank",document.body.appendChild(o),o.click(),document.body.removeChild(o)}g((n=t==null?void 0:t.data)==null?void 0:n.msg),u(!0)}}catch(t){console.log("handleSubmit => AddManagement.jsx ==> ",t)}m(!1)},v=async()=>{var s,n;try{const t=await b.post(`${f}/management/addtpo`,e,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(t!=null&&t.data){if(((s=t==null?void 0:t.data)==null?void 0:s.msg)==="User Created!"&&(e==null?void 0:e.sendMail)===!0){const i=encodeURIComponent("Welcome to the team!"),d=encodeURIComponent(`Hi ${e.first_name},

Welcome to our team as a TPO. We're excited to work with you!
Note:
Your ID: ${e.email}
Password: ${e.password}

Make sure you change password as soon as possible!!!

Best regards,
Management Team`),o=document.createElement("a");o.href=`mailto:${e.email}?subject=${i}&body=${d}`,o.target="_blank",document.body.appendChild(o),o.click(),document.body.removeChild(o)}g((n=t==null?void 0:t.data)==null?void 0:n.msg),u(!0)}}catch(t){console.log("handleSubmit => AddTPO.jsx ==> ",t)}m(!1)},k=async()=>{var s,n;try{const t=await b.post(`${f}/management/add-student`,e,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(t!=null&&t.data){if(((s=t==null?void 0:t.data)==null?void 0:s.msg)==="User Created!"&&(e==null?void 0:e.sendMail)===!0){const i=encodeURIComponent("Welcome to the Our College Placement Portal!"),d=encodeURIComponent(`Hi ${e.first_name},

Welcome to our college plcamenet portal. Happy hiring!
Note:
Your ID: ${e.email}
Password: ${e.password}

Make sure you change password as soon as possible!!!

Best regards,
Management Team`),o=document.createElement("a");o.href=`mailto:${e.email}?subject=${i}&body=${d}`,o.target="_blank",document.body.appendChild(o),o.click(),document.body.removeChild(o)}g((n=t==null?void 0:t.data)==null?void 0:n.msg),u(!0)}}catch(t){console.log("handleSubmit => AddStudent.jsx ==> ",t)}m(!1)};return a.jsxs(a.Fragment,{children:[a.jsx(_,{show:y,onClose:()=>u(!1),message:C,delay:3e3,position:"top-center"}),a.jsx("div",{className:"flex justify-center items-center h-full max-md:h-fit text-base max-sm:text-sm",children:a.jsx("div",{className:"my-4 backdrop-blur-md bg-white/30 border border-white/20 rounded-lg p-8 shadow shadow-red-400 w-fit",children:a.jsxs(r,{onSubmit:M,className:"flex flex-col justify-center items-center",children:[a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-6 max-sm:grid-cols-1 max-sm:gap-x-1 max-sm:gap-y-1",children:[a.jsxs("div",{className:"",children:[a.jsx(x,{label:a.jsx(a.Fragment,{children:a.jsxs("span",{children:["Name ",a.jsx("span",{className:"text-red-500",children:"*"})]})}),children:a.jsx(r.Control,{type:"text",autoComplete:"name",placeholder:"Name",name:"first_name",value:e.first_name||"",onChange:h})}),a.jsx("span",{className:"text-red-500",children:l==null?void 0:l.first_name})]}),a.jsxs("div",{className:"",children:[a.jsx(x,{label:a.jsx(a.Fragment,{children:a.jsxs("span",{children:["Email ",a.jsx("span",{className:"text-red-500",children:"*"})]})}),children:a.jsx(r.Control,{type:"email",autoComplete:"email",placeholder:"Email",name:"email",value:e.email||"",onChange:h})}),a.jsx("span",{className:"text-red-500",children:l==null?void 0:l.email})]}),a.jsxs("div",{className:"",children:[a.jsx(x,{label:a.jsx(a.Fragment,{children:a.jsxs("span",{children:["Number ",a.jsx("span",{className:"text-red-500",children:"*"})]})}),children:a.jsx(r.Control,{type:"number",autoComplete:"number",placeholder:"Phone Number",name:"number",value:e.number||"",onInput:s=>{s.target.value.length>10&&(s.target.value=s.target.value.slice(0,10))},onChange:h})}),a.jsx("span",{className:"text-red-500",children:l==null?void 0:l.number})]}),a.jsxs("div",{className:"",children:[a.jsx(x,{label:a.jsx(a.Fragment,{children:a.jsxs("span",{children:["Initial Password ",a.jsx("span",{className:"text-red-500",children:"*"})]})}),children:a.jsx(r.Control,{type:"password",autoComplete:"password",placeholder:"Enter Initial Password",name:"password",value:e.password||"",onChange:h})}),a.jsx("span",{className:"text-red-500",children:l==null?void 0:l.password})]})]}),a.jsx("div",{className:"",children:a.jsx(r.Check,{label:"Send user email about creation of account",name:"sendMail",onChange:s=>j({...e,sendMail:s.target.checked}),checked:e.sendMail,type:"checkbox"})})]}),a.jsxs("button",{type:"submit",className:"my-1 flex items-center px-3 py-2 bg-blue-500 text-white rounded",children:[a.jsx(A,{className:"mr-2 text-3xl max-sm:text-lg max-sm:mr-0.5"}),"Create New"]})]})})}),a.jsx(E,{show:N,close:$,header:"Confirmation",body:`Do you want to create new user ${e.sendMail===!0?` and send email to ${e==null?void 0:e.email} about creation of user!`:""}?`,btn:"Create",confirmAction:p==="management"?S:p==="tpo"?v:p==="student"?k:""})]})}export{G as default};
