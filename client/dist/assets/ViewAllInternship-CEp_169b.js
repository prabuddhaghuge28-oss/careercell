import{u as O,a as q,r as d,b as i,B as f,j as e}from"./index-F5vbwB_e.js";import{T as z}from"./Table-Cvi54BG9.js";import{T as Y,O as b,a as S}from"./TablePlaceholder-yL1ruwTr.js";import{M as G}from"./Modal-DXZjyk5v.js";import{C as H}from"./Toast-3WOWCnnS.js";import"./TransitionWrapper-BBSR4vEj.js";import"./ThemeProvider-nWUV6F1R.js";import"./hasClass-CHl0QHe7.js";import"./useTimeout-BGLe_eT-.js";import"./warning-BE2tzXYX.js";import"./Placeholder-sFQbI7v7.js";import"./Col-CGBuhqx3.js";import"./Button-yCakRxFg.js";function lt(){document.title="CarrerCell | My Internships";const j=O(),v=q(),[D,I]=d.useState(!0),[m,M]=d.useState([]),[N,r]=d.useState(!1),[T,u]=d.useState(""),[L,g]=d.useState(!1),[E,C]=d.useState({}),[A,P]=d.useState(""),[c,$]=d.useState({});d.useEffect(()=>{const t=localStorage.getItem("token");i.get(`${f}/user/detail`,{headers:{Authorization:`Bearer ${t}`}}).then(s=>{$({id:s.data.id,email:s.data.email,role:s.data.role})}).catch(s=>{console.log("AddUserTable.jsx => ",s),u(s),r(!0)}),n()},[]);const n=async()=>{var t,s,a,x;try{if(!(c!=null&&c.id))return;const o=await i.get(`${f}/student/internship?studentId=${c==null?void 0:c.id}`);M(o.data.internships),(t=o==null?void 0:o.data)!=null&&t.msg&&(u((s=o==null?void 0:o.data)==null?void 0:s.msg),r(!0)),I(!1)}catch(o){console.log("Error fetching jobs ",o),(x=(a=o==null?void 0:o.response)==null?void 0:a.data)!=null&&x.msg&&(u(o.response.data.msg),r(!0))}};d.useEffect(()=>{n()},[c==null?void 0:c.id]);const B=(t,s)=>{P(t),C({cmpName:s}),g(!0)},k=async t=>{var s,a,x,o,y,w;try{const l=await i.post(`${f}/student/delete-internship`,{internshipId:t,studentId:c.id});g(!1),n(),(s=l==null?void 0:l.data)!=null&&s.msg&&(u((a=l==null?void 0:l.data)==null?void 0:a.msg),r(!0))}catch(l){(o=(x=l==null?void 0:l.response)==null?void 0:x.data)!=null&&o.msg&&(u((w=(y=l==null?void 0:l.response)==null?void 0:y.data)==null?void 0:w.msg),r(!0)),console.log("Error deleting job ",l)}},_=t=>e.jsx(S,{id:"button-tooltip",...t,children:"Edit Internship Detail"}),W=t=>e.jsx(S,{id:"button-tooltip",...t,children:"Delete Internship"}),R=()=>g(!1),{showToastPass:h,toastMessagePass:F}=v.state||{showToastPass:!1,toastMessagePass:""};return d.useEffect(()=>{h&&(u(F),r(h),j(".",{replace:!0,state:{}}))},[]),e.jsx(e.Fragment,{children:e.jsxs(e.Fragment,{children:[e.jsx(H,{show:N,onClose:()=>r(!1),message:T,delay:3e3,position:"bottom-end"}),e.jsx("div",{className:"",children:D?e.jsx(Y,{}):e.jsxs(z,{striped:!0,bordered:!0,hover:!0,className:"bg-white my-6 rounded-lg shadow w-full text-base max-lg:text-sm max-md:my-3",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"6%"},children:"Sr. No."}),e.jsx("th",{style:{width:"16%"},children:e.jsx("b",{children:"Company Name"})}),e.jsx("th",{style:{width:"13%"},children:"Company Website"}),e.jsx("th",{style:{width:"14%"},children:"Internship Start Date"}),e.jsx("th",{style:{width:"14%"},children:"Internship End Date"}),e.jsx("th",{style:{width:"13%"},children:"Internship Duration"}),e.jsx("th",{style:{width:"11%"},children:"Monthly Stipend"}),e.jsx("th",{style:{width:"13%"},children:"Action"})]})}),e.jsx("tbody",{children:(m==null?void 0:m.length)>0?m==null?void 0:m.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{children:s+1}),e.jsx("td",{children:e.jsx("b",{children:(t==null?void 0:t.companyName)||"-"})}),e.jsx("td",{children:t!=null&&t.companyWebsite?e.jsx("a",{href:t==null?void 0:t.companyWebsite,target:"_blanck",className:"no-underline text-blue-500 hover:text-blue-700",children:t==null?void 0:t.companyWebsite}):"-"}),e.jsx("td",{children:new Date(t==null?void 0:t.startDate).toLocaleDateString("en-IN")||"-"}),e.jsx("td",{children:new Date(t==null?void 0:t.endDate).toLocaleDateString("en-IN")||"-"}),e.jsx("td",{children:t!=null&&t.internshipDuration?(t==null?void 0:t.internshipDuration)+" days":"-"}),e.jsx("td",{children:t!=null&&t.monthlyStipend?"Rs. "+(t==null?void 0:t.monthlyStipend):"-"}),e.jsx("td",{children:e.jsxs("div",{className:"flex justify-around items-center max-lg:flex-col max-lg:gap-1",children:[e.jsx("div",{className:"px-0.5",children:e.jsx(b,{placement:"top",delay:{show:250,hide:400},overlay:_,children:e.jsx("i",{className:"fa-regular fa-pen-to-square text-2xl cursor-pointer transition-colors duration-200 ease-in-out hover:text-blue-500",onClick:()=>j(`../student/add-internship/${t._id}`),onMouseEnter:a=>{a.target.classList.add("fa-solid"),a.target.classList.remove("fa-regular")},onMouseLeave:a=>{a.target.classList.add("fa-regular"),a.target.classList.remove("fa-solid")}})})}),e.jsx("div",{className:"px-0.5",children:e.jsx(b,{placement:"top",delay:{show:250,hide:400},overlay:W,children:e.jsx("i",{className:"fa-regular fa-trash-can text-2xl cursor-pointer transition-colors duration-200 ease-in-out hover:text-red-500",onClick:()=>B(t==null?void 0:t._id,t==null?void 0:t.companyName),onMouseEnter:a=>{a.target.classList.add("fa-solid"),a.target.classList.remove("fa-regular")},onMouseLeave:a=>{a.target.classList.add("fa-regular"),a.target.classList.remove("fa-solid")}})})})]})})]},t==null?void 0:t._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"8",children:"Internship Not Added Yet!"})})})]})}),e.jsx(G,{show:L,close:R,header:"Confirmation",body:`Do you want to delete internship of ${E.cmpName}?`,btn:"Delete",confirmAction:()=>k(A)})]})})}export{lt as default};
