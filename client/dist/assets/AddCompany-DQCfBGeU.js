import{u as I,r as t,c as B,j as e,b as C,B as b}from"./index-F5vbwB_e.js";import{B as T}from"./Button-yCakRxFg.js";import{a as n,F as i}from"./Form-DX8VXhY2.js";import{C as W}from"./Toast-3WOWCnnS.js";import{M as P}from"./Modal-DXZjyk5v.js";import"./ThemeProvider-nWUV6F1R.js";import"./useTimeout-BGLe_eT-.js";import"./TransitionWrapper-BBSR4vEj.js";import"./warning-BE2tzXYX.js";import"./Col-CGBuhqx3.js";import"./hasClass-CHl0QHe7.js";function O(){document.title="CarrerCell | Add Company";const N=I(),[v,m]=t.useState(!0),[d,p]=t.useState(""),{companyId:r}=B(),[D,x]=t.useState(!1),[w,y]=t.useState(""),[S,c]=t.useState(!1),[a,h]=t.useState(),F=()=>{c(!1)},L=o=>{if(o.preventDefault(),!(a!=null&&a.companyName)||!(a!=null&&a.companyDescription)||!(a!=null&&a.companyDifficulty)||!(a!=null&&a.companyLocation)||!(a!=null&&a.companyWebsite))return p("All Fields Required!");c(!0)},A=async()=>{var o,f,u,g,j;try{const s=await C.post(`${b}/company/add-company`,a,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(((o=s==null?void 0:s.data)==null?void 0:o.msg)==="Company Created Successfully!"){c(!1),y((f=s==null?void 0:s.data)==null?void 0:f.msg);const M={showToastPass:!0,toastMessagePass:(u=s==null?void 0:s.data)==null?void 0:u.msg};N("../tpo/companys",{state:M})}((g=s==null?void 0:s.data)==null?void 0:g.msg)==="Company Name Already Exist!"&&(c(!1),y((j=s==null?void 0:s.data)==null?void 0:j.msg),x(!0))}catch(s){console.log("AddCompany error while fetching => ",s)}},E=async()=>{try{const o=await C.get(`${b}/company/company-data?companyId=${r}`);h(o.data.company)}catch(o){console.log("AddCompany error while fetching => ",o)}finally{m(!1)}};t.useEffect(()=>{r&&E()},[r]),t.useEffect(()=>{r||m(!1)},[]);const l=o=>{p(""),h({...a,[o.target.name]:o.target.value})};return e.jsxs(e.Fragment,{children:[e.jsx(W,{show:D,onClose:()=>x(!1),message:w,delay:3e3,position:"bottom-end"}),v?e.jsx("div",{className:"flex justify-center h-72 items-center",children:e.jsx("i",{className:"fa-solid fa-spinner fa-spin text-3xl"})}):e.jsx(e.Fragment,{children:e.jsxs(n,{onSubmit:L,children:[e.jsxs("div",{className:"my-8 text-base backdrop-blur-md bg-white/30 border border-white/20 rounded-lg shadow shadow-red-400 p-6 max-sm:text-sm max-sm:p-3",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 max-sm:grid-cols-1",children:[e.jsx(i,{controlId:"floatingCompanyName",label:e.jsx(e.Fragment,{children:e.jsxs("span",{children:["Company Name ",e.jsx("span",{className:"text-red-500",children:"*"})]})}),children:e.jsx(n.Control,{type:"text",placeholder:"Company Name",name:"companyName",value:(a==null?void 0:a.companyName)||"",onChange:l})}),e.jsx(i,{controlId:"floatingCompanyLocation",label:e.jsx(e.Fragment,{children:e.jsxs("span",{children:["Company Location ",e.jsx("span",{className:"text-red-500",children:"*"})]})}),children:e.jsx(n.Control,{type:"text",placeholder:"Company Location",name:"companyLocation",value:(a==null?void 0:a.companyLocation)||"",onChange:l})})]}),e.jsx(i,{controlId:"floatingCompanyWebsite",label:e.jsx(e.Fragment,{children:e.jsxs("span",{children:["Company Website ",e.jsx("span",{className:"text-red-500",children:"*"})]})}),children:e.jsx(n.Control,{type:"link",placeholder:"Company Website",name:"companyWebsite",value:(a==null?void 0:a.companyWebsite)||"",onChange:l})}),e.jsx(i,{controlId:"floatingSelectDifficulty",label:e.jsx(e.Fragment,{children:e.jsxs("span",{children:["Difficulty Level ",e.jsx("span",{className:"text-red-500",children:"*"})]})}),children:e.jsxs(n.Select,{"aria-label":"Floating label select difficulty",className:"cursor-pointer",name:"companyDifficulty",value:(a==null?void 0:a.companyDifficulty)||"",onChange:l,children:[e.jsx("option",{disabled:!0,value:"",className:"text-gray-400",children:"Enter Difficulty Level"}),e.jsx("option",{value:"Easy",children:"Easy"}),e.jsx("option",{value:"Moderate",children:"Moderate"}),e.jsx("option",{value:"Hard",children:"Hard"})]})}),e.jsx(i,{controlId:"floatingcompanyDescription",label:e.jsx(e.Fragment,{children:e.jsxs("span",{children:["Company Description ",e.jsx("span",{className:"text-red-500",children:"*"})]})}),children:e.jsx(n.Control,{as:"textarea",placeholder:"Company Description",name:"companyDescription",style:{height:"100px",maxHeight:"450px"},value:(a==null?void 0:a.companyDescription)||"",onChange:l})})]}),d&&e.jsx("div",{className:"flex pt-2",children:e.jsx("span",{className:"text-red-500",children:d})})]}),e.jsx("div",{className:"flex flex-col justify-center items-center gap-2",children:e.jsx(T,{variant:"primary",type:"submit",size:"lg",children:"Add Company"})})]})}),e.jsx(P,{show:S,close:F,header:"Confirmation",body:`Do you want to add company ${a==null?void 0:a.companyName}?`,btn:"Post",confirmAction:A})]})}export{O as default};
