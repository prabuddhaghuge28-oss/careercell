import{r as m,j as e,S as x,b as h,B as g}from"./index-F5vbwB_e.js";import{a as j}from"./Form-DX8VXhY2.js";const S=({resultType:n,label:p,fetchCurrentUserData:d,currentUser:u,resultFile:t})=>{const[o,s]=m.useState(""),f=async l=>{var i,c;if(l.preventDefault(),!l.target.files[0]){s("Please select a file");return}const a=new FormData;a.append("result",l.target.files[0]),a.append("userId",u.id),a.append("resultType",n);try{const r=await h.post(`${g}/student/upload-result`,a,{headers:{"Content-Type":"multipart/form-data"}});d&&d(),s(r.data.msg||"Result file uploaded successfully"),setTimeout(()=>s(""),3e3)}catch(r){console.error("Error uploading the result file",r),s(((c=(i=r.response)==null?void 0:i.data)==null?void 0:c.msg)||"Error uploading the result file"),setTimeout(()=>s(""),3e3)}};return e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(j.Control,{type:"file",accept:".pdf, .doc, .docx, .jpg, .jpeg, .png",placeholder:`Upload ${p}`,name:`result-${n}`,onChange:f,size:"sm"}),t&&t.filepath!=="undefined"&&t.filepath&&e.jsx("div",{className:"py-1",children:e.jsx("span",{className:"bg-green-500 py-1 px-2 rounded cursor-pointer hover:bg-green-700 text-white text-xs",children:e.jsxs("a",{href:x+t.filepath,target:"_blank",rel:"noopener noreferrer",className:"no-underline text-white",children:[e.jsx("i",{className:"fa-regular fa-eye px-1"}),"View ",p]})})}),o&&e.jsx("p",{className:"text-xs mt-1",style:{color:o.includes("Error")?"#ef4444":"#10b981"},children:o})]})};export{S as U};
