import{r as t,j as o,b as c,B as m}from"./index-F5vbwB_e.js";import{C as M}from"./Toast-3WOWCnnS.js";import{M as O}from"./Modal-DXZjyk5v.js";import{A as $}from"./AddUserTable-BUffmWqP.js";import"./ThemeProvider-nWUV6F1R.js";import"./useTimeout-BGLe_eT-.js";import"./TransitionWrapper-BBSR4vEj.js";import"./Button-yCakRxFg.js";import"./hasClass-CHl0QHe7.js";import"./Table-Cvi54BG9.js";import"./TablePlaceholder-yL1ruwTr.js";import"./warning-BE2tzXYX.js";import"./Placeholder-sFQbI7v7.js";import"./Col-CGBuhqx3.js";function J(){document.title="CarrerCell | TPO Users";const[h,S]=t.useState([]),[T,w]=t.useState(!0),[A,a]=t.useState(!1),[x,d]=t.useState(""),[u,r]=t.useState(!1),[n,p]=t.useState(null),l=async()=>{try{const e=await c.get(`${m}/management/tpo-users`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});e.data?S(e.data.tpoUsers):console.warn("Response does not contain tpoUsers:",e.data)}catch(e){console.error("Error fetching user details",e)}finally{w(!1)}};t.useEffect(()=>{l()},[]);const[D,y]=t.useState(!1),[i,U]=t.useState({first_name:"",email:"",number:"",password:""}),b=e=>U({...i,[e.target.name]:e.target.value}),j=e=>{p(e),r(!0)},f=async()=>{try{const e=await c.post(`${m}/management/deletetpo`,{email:n},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});r(!1),e.data&&(d(e.data.msg),a(!0),l())}catch(e){console.log("AddTPO => confirmDelete ==> ",e)}},g=()=>{r(!1),p(null)},C=async e=>{e.preventDefault();try{const s=await c.post(`${m}/management/addtpo`,i,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});s.data&&(d(s.data.msg),a(!0),l())}catch(s){console.log("handleSubmit => AddTPO.jsx ==> ",s)}};return o.jsxs(o.Fragment,{children:[o.jsx(M,{show:A,onClose:()=>a(!1),message:x,delay:3e3,position:"top-center"}),o.jsx($,{users:h,loading:T,handleDeleteUser:j,formOpen:D,setFormOpen:y,data:i,handleDataChange:b,handleSubmit:C,showModal:u,closeModal:g,confirmDelete:f,userToDelete:n,userToAdd:"TPO Admin"}),o.jsx(O,{show:u,close:g,header:"Confirmation",body:`Do you want to delete ${n}?`,btn:"Delete",confirmAction:f})]})}export{J as default};
